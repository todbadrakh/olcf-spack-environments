# OLCF Borg Spack Environment
# Tuguldur T Odbadrakh 12/29/2023 Borg

packages:
  all:
    buildable: true
    providers:
      blas: [openblas, cray-libsci@23.12.5, cray-libsci@21.08.1.2]
      lapack: [openblas, cray-libsci@23.12.5, cray-libsci@21.08.1.2]
      mpi: [cray-mpich]
      scalapack: [netlib-scalapack]
    target: [zen3]
  axom:
    variants: ~examples~openmp+hdf5+umpire+raja+mpi
  binutils:
    buildable: true
    variants: +libiberty
  camp:
    variants: ~rocm
  chai:
    variants: ~examples~benchmarks~tests~rocm
  comgr:
    buildable: false
    externals:
      - prefix: /opt/rocm-5.7.1
        spec: comgr@5.7.1
    version:
    - 5.7.1
      #cray-libsci:
      #  buildable: false
      #  externals:
      #    - modules:
      #        - cray-libsci/23.12.5
      #      spec: cray-libsci@23.12.5
      #  version:
      #  - 23.12.5
  cray-libsci:
    buildable: false
    externals:
      - spec: cray-libsci@23.09.1.1 %gcc
        prefix: /opt/cray/pe/libsci/23.09.1.1/GNU/10.3/x86_64
        modules: [cray-libci/23.09.1.1]
      - spec: cray-libsci@23.09.1.1 %clang
        prefix: /opt/cray/pe/libsci/23.09.1.1/AMD/5.0/x86_64
        modules: [cray-libci/23.09.1.1]
      - spec: cray-libsci@23.09.1.1 %cce
        prefix: /opt/cray/pe/libsci/23.09.1.1/CRAY/12.0/x86_64
        modules: [cray-libci/23.09.1.1]
      #cray-mpich:
      #  buildable: false
      #  externals:
      #    - modules:
      #        - cray-mpich/8.1.28
      #      spec: cray-mpich@8.1.28
      #  version:
      #  - 8.1.28
  cray-mpich:
    buildable: false
    externals:
      - spec: cray-mpich@8.1.28 %gcc
        prefix: /opt/cray/pe/mpich/8.1.28/ofi/gnu/12.3
        modules: [cray-mpich,libfabric]
      - spec: cray-mpich@8.1.28 %clang
        prefix: /opt/cray/pe/mpich/8.1.28/ofi/amd/5.0
        modules: [cray-mpich,libfabric]
      - spec: cray-mpich@8.1.28 %cce
        prefix: /opt/cray/pe/mpich/8.1.28/ofi/cray/17.0
        modules: [cray-mpich,libfabric]
  darshan-runtime:
    buildable: true
    variants: +grouplogs scheduler=slurm logpath=/gpfs/alpine/darshan/borg
  fftw:
    buildable: true
    variants: precision=float,double,long_double
  gdbm:
    version: [1.19]
  hdf5:
    buildable: true
    variants: +hl+cxx+fortran
  hip:
    buildable: false
    externals:
      - extra_attributes:
          compilers:
            c: /opt/rocm-5.7.1/llvm/bin/clang++
            cxx: /opt/rocm-5.7.1/llvm/bin/clang++
            hip: /opt/rocm-5.7.1/hip/bin/hipcc
        prefix: /opt/rocm-5.7.1/hip
        environment:
          set:
            MPICH_GPU_SUPPORT_ENABLED: 1
        modules: [rocm/5.7.1, craype-accel-amd-gfx90a]
        spec: hip@5.7.1
    version: 
    - 5.7.1
  hip-rocclr:
    buildable: false
    externals:
      - prefix: /opt/rocm-5.7.1/rocclr
        spec: hip-rocclr@5.7.1 ^hsa-rocr-dev@5.7.1
    version: 
    - 5.7.1
  hipblas:
    buildable: false
    externals:
      - prefix: /opt/rocm-5.7.1
        spec: hipblas@5.7.1 
    version: 
    - 5.7.1
  hipcub:
    buildable: false
    externals:
      - prefix: /opt/rocm-5.7.1
        spec: hipcub@5.7.1 
    version: 
    - 5.7.1
  hipfft:
    buildable: false
    externals:
      - prefix: /opt/rocm-5.7.1
        spec: hipfft@5.7.1 
    version: 
    - 5.7.1
  hipfort:
    buildable: false
    externals:
      - prefix: /opt/rocm-5.7.1
        spec: hipfort@5.7.1 
    version: 
    - 5.7.1
  hipify-clang:
    buildable: false
    externals:
      - prefix: /opt/rocm-5.7.1
        spec: hipify-clang@5.7.1
    version: 
    - 5.7.1
  hiprand:
    buildable: false
    externals:
      - prefix: /opt/rocm-5.7.1
        spec: hiprand@5.7.1
    version:
    - 5.7.1
  hipsolver:
    buildable: false
    externals:
      - prefix: /opt/rocm-5.7.1
        spec: hipsolver@5.7.1
    version:
    - 5.7.1
  hipsparse:
    buildable: false
    externals:
      - prefix: /opt/rocm-5.7.1
        spec: hipsparse@5.7.1 
    version: 
    - 5.7.1
  hsa-rocr-dev:
    buildable: false
    externals:
      - prefix: /opt/rocm-5.7.1
        spec: hsa-rocr-dev@5.7.1
    version: 
    - 5.7.1
  hsakmt-roct:
    buildable: false
    externals:
      - prefix: /opt/rocm-5.7.1
        spec: hsakmt-roct@5.7.1
    version: 
    - 5.7.1
  libfabric:
    buildable: true
    externals:
      - prefix: /opt/cray/libfabric/1.15.2.0
        spec: libfabric@1.15.2.0
    version:
    - 1.15.2.0
    variants: fabrics=rxm,sockets,tcp,udp
  libtool:
    buildable: true
    version: [2.4.6]
  llvm-amdgpu:
    buildable: false
    externals:
      - prefix: /opt/rocm-5.7.1/llvm
        spec: llvm-amdgpu@5.7.1
        modules: [rocm/5.7.1]
        extra_attributes:
          compilers:
            c: /opt/rocm-5.7.1/llvm/bin/clang++
            cxx: /opt/rocm-5.7.1/llvm/bin/clang++
    version: 
    - 5.7.1
  m4:
    buildable: true
    version: [1.4.18]
  miopen-hip:
    buildable: false
    externals:
      - prefix: /opt/rocm-5.7.1
        spec: miopen-hip@5.7.1 
    version: 
    - 5.7.1
  mpich:
    buildable: true
    variants: +verbs+slurm device=ch4 netmod=ofi pmi=pmi
    version: [3.4.1]
  ncurses:
    buildable: true
    externals:
      - prefix: /sw/borg/spack-envs/base/opt/linux-sles15-x86_64/gcc-7.5.0/ncurses-6.2-mg5foemn555y6knv5hvtey3sqrvhinrw
        spec: ncurses@6.2%cce@13.0.0~symlinks+termlib
      - prefix: /sw/borg/spack-envs/base/opt/linux-sles15-x86_64/gcc-7.5.0/ncurses-6.2-mg5foemn555y6knv5hvtey3sqrvhinrw
        spec: ncurses@6.2%cce@13.0.1~symlinks+termlib
      - prefix: /sw/borg/spack-envs/base/opt/linux-sles15-x86_64/gcc-7.5.0/ncurses-6.2-mg5foemn555y6knv5hvtey3sqrvhinrw
        spec: ncurses@6.2%cce@13.0.2~symlinks+termlib
    variants: +termlib
  netcdf-c:
    buildable: true
    variants: ~hdf4+mpi+parallel-netcdf+shared
  netlib-scalapack:
    buildable: true
    variants: +fpic
  octave:
    buildable: true
    variants: +magick+arpack+curl+fftw+fontconfig+freetype+glpk+gnuplot+hdf5+opengl+qhull+qrupdate+qt+readline+suitesparse+zlib
  openmpi:
    buildable: false
  openssh:
    buildable: false
    externals:
      - prefix: /usr
        spec: openssh@8.4
    version: [8.4]
  openssl:
    buildable: false
    externals:
      - spec: openssl@1.1.1-os
        prefix: /usr
    version: [1.1.1-os]
  parallel-netcdf:
    buildable: true
    variants: +cxx+fortran+fpic
  petsc:
    variants: +batch
  qt:
    buildable: true
    variants: ~ssl
  r:
    buildable: true
    variants: ~X
  raja:
    variants: ~exercises~examples~tests~openmp~rocm
  rccl:
    buildable: false
    externals:
      - prefix: /opt/rocm-5.7.1
        spec: rccl@5.7.1 
    version: 
    - 5.7.1
  rocalution:
    buildable: false
    externals:
      - prefix: /opt/rocm-5.7.1
        spec: rocalution@5.7.1 
    version: 
    - 5.7.1
  rocblas:
    buildable: false
    externals:
      - prefix: /opt/rocm-5.7.1
        spec: rocblas@5.7.1 
    version: 
    - 5.7.1
  rocfft:
    buildable: false
    externals:
      - prefix: /opt/rocm-5.7.1
        spec: rocfft@5.7.1 
    variants: amdgpu_target=gfx90a amdgpu_target_sram_ecc=gfx90a
    version: 
    - 5.7.1
  rocm-clang-ocl:
    buildable: false
    externals:
      - prefix: /opt/rocm-5.7.1
        spec: rocm-clang-ocl@5.7.1
    version: 
    - 5.7.1
  rocm-cmake:
    buildable: false
    externals:
      - prefix: /opt/rocm-5.7.1
        spec: rocm-cmake@5.7.1
    version: 
    - 5.7.1
  rocm-device-libs:
    buildable: false
    externals:
      - prefix: /opt/rocm-5.7.1
        spec: rocm-device-libs@5.7.1
    version: 
    - 5.7.1
  rocm-gdb:
    buildable: false
    externals:
      - prefix: /opt/rocm-5.7.1
        spec: rocm-gdb@5.7.1
    version: 
    - 5.7.1
  rocm-opencl:
    buildable: false
    externals:
      - prefix: /opt/rocm-5.7.1/opencl
        spec: rocm-opencl@5.7.1
    version: 
    - 5.7.1
  rocm-opencl-runtime:
    buildable: false
    externals:
      - prefix: /opt/rocm-5.7.1/opencl
        spec: rocm-opencl-runtime@5.7.1
    version: 
    - 5.7.1
  rocm-openmp-extras:
    buildable: false
    externals:
      - prefix: /opt/rocm-5.7.1/llvm
        spec: rocm-openmp-extras@5.7.1
    version: 
    - 5.7.1
  rocm-smi:
    buildable: false
    externals:
      - prefix: /opt/rocm-5.7.1/rocm_smi
        spec: rocmsmi@5.7.1
    version: 
    - 5.7.1
  rocm-smi-lib:
    buildable: false
    externals:
      - prefix: /opt/rocm-5.7.1/rocm_smi
        spec: rocm-smi-lib@5.7.1
    version: 
    - 5.7.1
  rocminfo:
    buildable: false
    externals:
      - prefix: /opt/rocm-5.7.1
        spec: rocminfo@5.7.1
    version: 
    - 5.7.1
  rocprim:
    buildable: false
    externals:
      - prefix: /opt/rocm-5.7.1
        spec: rocprim@5.7.1 
    version: 
    - 5.7.1
  rocprofiler-dev:
    buildable: false
    externals:
      - prefix: /opt/rocm-5.7.1
        spec: rocprofiler-dev@5.7.1
    version: 
    - 5.7.1
  rocrand:
    buildable: false
    externals:
      - prefix: /opt/rocm-5.7.1
        spec: rocrand@5.7.1 
    version: 
    - 5.7.1
  rocsolver:
    buildable: false
    externals:
      - prefix: /opt/rocm-5.7.1
        spec: rocsolver@5.7.1 
    version: 
    - 5.7.1
  rocsparse:
    buildable: false
    externals:
      - prefix: /opt/rocm-5.7.1
        spec: rocsparse@5.7.1 
    version:
    - 5.7.1
  rocthrust:
    buildable: false
    externals:
      - prefix: /opt/rocm-5.7.1
        spec: rocthrust@5.7.1 
    version:
    - 5.7.1
  roctracer-dev:
    buildable: false
    externals:
      - prefix: /opt/rocm-5.7.1
        spec: roctracer-dev@5.7.1 
    version:
    - 5.7.1
  slurm:
    buildable: false
    externals:
      - prefix: /usr
        spec: slurm@21.08.0
    version: [21.08.0]
  sundials:
    variants: ~examples~examples-install
  tcsh:
    buildable: false
    externals:
      - prefix: /usr
        spec: tcsh@6.20.00
    version: [6.20.00]
  trilinos:
    variants: +amesos +amesos2 +anasazi +aztec +belos +boost +epetra +epetraext +ifpack +ifpack2 +intrepid +intrepid2 +isorropia +kokkos +ml +minitensor +muelu +nox +piro +phalanx +rol +rythmos +sacado +stk +shards +shylu +stokhos +stratimikos +teko +tempus +tpetra +trilinoscouplings +zoltan +zoltan2 +superlu-dist gotype=long_long
  umpire:
    variants: ~examples~rocm
  vtk-m:
    variants: +hip amdgpu_target=gfx908

# ROCm 5.7.0 environment
# Tuguldur T. Odbadrakh
# 10/13/2023

spack:
  
  include:
    - config.yaml
    - compilers.yaml
    - modules.yaml
    - packages.yaml
  
  definitions:
  - core_compiler:
    - '%gcc@7.5.0' 
  - amd_compiler:
    - '%clang@amd'
  
  - core_packages:
    - bazel
    - bison
    - boost
    - cairo
    - ccache
    - cmake
    - darshan-util
    - expat
    - gdbm
    - gettext
    - go
    - googletest
    - julia
    - m4
    - mesa
    - mercurial
    - ninja
    - openblas
    - openjdk
    - perl
    - python
    - py-jupyterhub
    - sqlite
    - subversion
    - texinfo
    - tmux
    - zstd

  - e4s_packages:
    #- adios@2.8.3
    - amrex@22.11 +rocm amdgpu_target=gfx908
      #- globalarrays@5.8 +scalapack
      #- hdf5@1.14.0 +cxx+fortran
    - hpx@1.8.1 +rocm amdgpu_target=gfx908 ^asio cxxstd=17 ^boost cxxstd=17
    - hypre@2.26.0 +rocm+openmp+superlu-dist amdgpu_target=gfx908
    - kokkos@3.7.00 +rocm amdgpu_target=gfx908
    - kokkos-kernels@3.7.00
    - magma@2.6.2 +rocm amdgpu_target=gfx908
      #- nco@5.0.1
      #- papi@7.0.1
    - parsec@3.0.2209 ~cuda
    - petsc@3.18.1 +rocm amdgpu_target=gfx908 ^superlu-dist +rocm amdgpu_target=gfx908
    - slate@2021.05.02 +rocm amdgpu_target=gfx908
    - superlu-dist@7.2.0 +rocm amdgpu_target=gfx908
      #- tau@2.32
    - upcxx +rocm+mpi amdgpu_target=gfx908
  
  - core_specs:
    - matrix:
      - - $core_compiler
      - - $core_packages
      - - arch=linux-sles15-x86_64

  - rocm-5.5.1-specs:
    - matrix:
      - - $e4s_packages
      - - $amd_compiler
      - - arch=linux-sles15-x86_64
  
  specs:
  - $rocm-5.5.1-specs


# Base environment
# Tuguldur T. Odbadrakh
# 10/13/2023

spack:
  
  include:
    - config.yaml
    - compilers.yaml
    - modules.yaml
    - packages.yaml
  
  definitions:

  - core_compiler:
    - '%gcc@7.5.0'
  
  - gcc_compilers:
    - '%gcc@12.2.0'
    - '%gcc@12.1.0'
    - '%gcc@11.2.0'
    - '%gcc@10.3.0'
  
  - cray_compilers:
    - '%cce@16.0.0'
    - '%cce@15.0.1'
    - '%cce@14.0.4'
  
  - amd_compilers:
    - '%clang@17.0.0-rocm5.7.0'
    - '%clang@16.0.0-rocm5.5.0'
    - '%clang@15.0.0-rocm5.4.0'
    - '%clang@15.0.0-rocm5.3.0'
    - '%clang@14.0.0-rocm5.2.0'
    - '%clang@14.0.0-rocm5.1.0'
  
  - core_packages:
    - bazel@5.2.0
    - bzip2@1.0.8
    - ccache@4.6.1
    - cmake@3.24.3
    - darshan-util@3.4.0 +bzip2
    - exuberant-ctags@5.8
    - gdb@12.1
    - git@2.38.1 +svn
    - git-lfs@2.11.0
    - gmake@4.3
    - gnupg@2.3.8
    - go@1.18
    - googletest@1.12.1 cxxstd=17
    - htop@3.0.2
    - libbsd@0.11.5
    - libpng@1.6.37
    - libzmq@4.3.4 +libbsd+libsodium+libunwind
    - mesa@22.1.2 ~llvm
    - ninja@1.11.1
    - openblas@0.3.21
    - openjdk@11.0.17_8
    - python@3.10.8 +optimizations
    - py-jupyterhub@1.4.1
    - rust@1.60.0
    - screen@4.8.0
    - sqlite@3.39.4
    - texinfo@6.5
    - tmux@3.2a
    - wget@1.21.3 +python
    - zlib@1.2.13
    - zstd@1.5.2

  - e4s_packages:
    - adios2@2.8.3 +hdf5~bzip2
    - boost@1.80.0 +mpi+python+numpy+thread cxxstd=17
    - globalarrays@5.8 +scalapack
    - hdf5@1.14.0 +cxx+fortran
    - kokkos-kernels@3.7.00
    - nco@5.0.1
    - netlib-scalapack@2.2.0
    - papi@7.0.1
    - parsec@3.0.2209 ~cuda
      #- tau@2.32

  - e4s_rocm_packages:
    - amrex@22.11
      #- blaspp@2022.07.00
      #- hpx@1.8.1 ^boost cxxstd=17 ^asio cxxstd=17
    - hypre@2.26.0 +openmp
    - kokkos@3.7.00
      #- lapackpp@2022.07.00
      #- petsc@3.18.1
      #- slate@2022.07.00
    - superlu-dist@8.1.1 +openmp
    - upcxx@2023.3.0 +mpi
  
  - core_specs:
    - matrix:
      - - $core_packages
      - - $core_compiler
      - - arch=linux-sles15-x86_64
  
  - PrgEnv-gnu_specs:
    - matrix:
      - - $e4s_packages
      - - '%gcc@12.2.0'
      - - arch=cray-sles15-zen2

  - PrgEnv-gnu-rocm_specs:
    - matrix:
      - - $e4s_rocm_packages
      - - '%gcc@12.2.0'
        - '+rocm amdgpu_target=gfx908'
      - - arch=cray-sles15-zen2

  specs:
  - $core_specs
  - $PrgEnv-gnu_specs
  - $PrgEnv-gnu-rocm_specs

  view: false

spack:
  include:
    - config.yaml
    - compilers.yaml
    - mirrors.yaml
    - modules.yaml
    - packages.yaml
    - repos.yaml
  definitions:
  - core_compiler:
    - '%gcc@7.5.0'
  - gcc_compilers:
    - '%gcc@12.2.0'
    - '%gcc@12.1.0'
    - '%gcc@11.2.0'
    - '%gcc@10.3.0'
  - cray_compilers:
    - '%cce@16.0.0'
    - '%cce@15.0.1'
    - '%cce@14.0.4'
  - amd_compilers:
    - '%clang@17.0.0-rocm5.7.0'
    - '%clang@16.0.0-rocm5.5.0'
    - '%clang@15.0.0-rocm5.4.0'
    - '%clang@15.0.0-rocm5.3.0'
    - '%clang@14.0.0-rocm5.2.0'
    - '%clang@14.0.0-rocm5.1.0'
  - core_packages:
    - bazel
    - bison
    - boost
    - cairo
    - ccache
    - cmake
    - darshan-util
    - expat
    - gdbm
    - gettext
    - go
    - googletest
    - m4
    - mesa
    - ninja
    - openblas
    - perl
    - sqlite
    - texinfo
    - tmux
    - zstd
  - e4s_packages:
    - adios@2.8.3
    - amrex@22.11 +rocm amdgpu_target=gfx908
    - globalarrays@5.8 +scalapack
    - hdf5@1.14.0 +cxx+fortran
    - hpx@1.8.1 +rocm amdgpu_target=gfx908 ^asio cxxstd=17
    - hypre@2.26.0 +rocm+openmp amdgpu_target=gfx908
    - kokkos@3.7.00
    - kokkos-kernels@3.7.00
    - magma@2.6.2 +rocm amdgpu_target=gfx908
    - nco@5.0.1
    - papi@7.0.1
    - parsec@3.0.2209
    - petsc@3.18.1 +rocm amdgpu_target=gfx908
    - slate@2021.05.02 +rocm amdgpu_target=gfx908
    - superlu-dist@7.2.0 +rocm amdgpu_target=gfx908
    - tau@2.32
    - upcxx +rocm+mpi amdgpu_target=gfx908
  - core_specs:
    - matrix:
      - - $core_packages
      - - $core_compiler
      - - arch=linux-sles15-x86_64
  - e4s_specs:
    - matrix:
      - - $e4s_packages
      - - '%gcc@12.2.0'
      - - arch=cray-sles15-zen2
  specs:
  - $core_specs
  - $e4s_specs
